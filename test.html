<!doctype html>
<!--Creates a three.js skybox panorama inside of Argon2 (Isotope), Fall-Winter, 2013-2014:
	Download the channel files for Argon1, Argon2(Isotope), and the browser version together with skybox panels at http://panorama.lcc.gatech.edu/fs/download/2013-09-27_14.58.36.zip
	-->


<html lang="en">
   <head>
       <title>Copenhagen May 2012</title>
       <link rel="stylesheet" href="jslog.css" />
       <link rel="apple-touch-icon" href="assets/sample_icon_57x57.png" />
       <meta charset="utf-8"/>
       <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
       <meta name="arenabled" />
            

   </head>
   <body>
  
		<script src="http://argon.gatech.edu/argon.js"></script>
        <script>
 			var touchX;
 			var touchY;
			var phi = 0;
			var theta = 0;
			var lat = 0;
			var lon = 0;
			var changed = false;
			var icount = 0;
			
			//This code to allow the user to scroll with finger does not yet work. User can look around the panorama by moving the iPad
     		var target = new THREE.Vector3();

     	 	var app = {
    	 		onRender: function (time) {
    	 			icount += 1;
				 	// check for position if threshold surpassed
				 	if (changed) {
						phi = THREE.Math.degToRad( 90 - lat );
						theta = THREE.Math.degToRad( lon );
						
						target.x = Math.sin( phi ) * Math.cos( theta );
						target.y = Math.cos( phi );
						target.z = Math.sin( phi ) * Math.sin( theta );
		
						sc.rotation.copy(target);
						/* ARGON.threeCamera.lookAt( target );						*/
						icount = 0;
						changed = false;
						} //THRESHOLD
					}  //onRender		    	 	
    	 	};

           var myAppController =
           {   
               geoSpot : null,

               onArgonReady : function()
               {
               	var mesh;
               	var geometry = new THREE.SphereGeometry( 100, 32, 32 );
				var material = new THREE.MeshBasicMaterial( {
					map: THREE.ImageUtils.loadTexture( 'img/test.jpg' )
				} );
				mesh = new THREE.Mesh( geometry, material );
				mesh.scale.x = -1;

				//sc.add(sphere);
				ARGON.World.add( mesh );
 				ARGON.threeCamera.fov = 75;

 				ARGON.onRender = app.onRender; 
               }
    
           };

		document.addEventListener("AR.ArgonReadyEvent", myAppController.onArgonReady);

       </script>      
       
       
   </body>
</html>